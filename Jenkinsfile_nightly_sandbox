#!groovy

properties([
        parameters([string(name: 'LIB_VERSION', defaultValue: 'master', description: 'Branch name of pipeline library to use')]),
        pipelineTriggers([cron('15 02 * * *')])
])

library "Infrastructure@${params.LIB_VERSION}"

String product = "SSCS"

String component = "TYA"

def type = "nodejs"

withNightlyPipeline(type,product,component) {

    env.TEST_URL = 'https://track-appeal.nonprod.platform.hmcts.net'
    env.SAUCE_ACCESS_KEY='c7dd3daf-5e1f-4d72-a07f-278260ef69b8'
    env.SAUCE_USERNAME='vreddy'
    env.http_proxy='http://proxyout.reform.hmcts.net:8080'
    env.https_proxy='http://proxyout.reform.hmcts.net:8080'
    env.HTTPS_PROXY='http://proxyout.reform.hmcts.net:8080'
    env.HTTP_PROXY='http://proxyout.reform.hmcts.net:8080'
    env.no_proxy='*.googleapis.com'
    env.NO_PROXY='*.googleapis.com'
    enableCrossBrowserTest()

       after('crossBrowserTest') {
           steps.archiveArtifacts allowEmptyArchive: true, artifacts: 'functional-output/**/*'
       }

}
